# Welcome Agent - ç®€åŒ–ç‰ˆï¼šä¸“æ³¨å¤§æ¨¡å‹æ¨è

## ğŸš€ ç³»ç»Ÿæ¦‚è¿°

Welcome Agent é‡‡ç”¨**çº¯å¤§æ¨¡å‹é©±åŠ¨**çš„åŒPromptæ¶æ„ï¼Œå®ç°æ™ºèƒ½ç”¨æˆ·ä¿¡æ¯æ”¶é›†å’Œä¸ªæ€§åŒ–æ¨èã€‚ç§»é™¤äº†æ‰€æœ‰æœ¬åœ°ç®—æ³•æ¨èï¼Œå®Œå…¨ä¾é AIè¿›è¡Œæ™ºèƒ½å¼•å¯¼ã€‚

### ğŸ¯ åŒPromptæ¶æ„ä¼˜åŠ¿

#### ğŸ§  **æ„å›¾è¯†åˆ«ä¸“å®¶** (Prompt 1)
- **ä¸“æ³¨é¢†åŸŸ**ï¼šæ·±åº¦ç†è§£ç”¨æˆ·è¾“å…¥ï¼Œç²¾å‡†æå–ç»“æ„åŒ–ä¿¡æ¯
- **æ ¸å¿ƒèƒ½åŠ›**ï¼š
  - è¯­ä¹‰åˆ†æå’Œéšå«ä¿¡æ¯æ¨æ–­
  - å¢é‡ä¿¡æ¯åˆå¹¶å’Œä¿æŒ
  - ç½®ä¿¡åº¦è¯„ä¼°å’Œç¼ºå¤±å­—æ®µæ£€æµ‹
  - ç”¨æˆ·è¾“å…¥ç±»å‹åˆ†ç±»

#### ğŸ¨ **æ¨èå¼•å¯¼ä¸“å®¶** (Prompt 2)  
- **ä¸“æ³¨é¢†åŸŸ**ï¼šåŸºäºç”¨æˆ·ç”»åƒï¼Œæ™ºèƒ½ç”Ÿæˆä¸ªæ€§åŒ–æ¨èå’Œå¼•å¯¼è¯æœ¯
- **æ ¸å¿ƒèƒ½åŠ›**ï¼š
  - AIåŠ¨æ€ç”Ÿæˆä¸ªæ€§åŒ–é€‰é¡¹
  - è‡ªç„¶å¯¹è¯å¼•å¯¼
  - åŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½æ¨è
  - ä¸ªæ€§åŒ–æ¨èç†ç”±

## ğŸ†• æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– **çº¯AIæ™ºèƒ½æ¨è**
- **åŠ¨æ€é€‰é¡¹ç”Ÿæˆ**ï¼šAIæ ¹æ®ç”¨æˆ·ç”»åƒå®æ—¶ç”Ÿæˆä¸ªæ€§åŒ–é€‰é¡¹
- **ä¸Šä¸‹æ–‡ç†è§£**ï¼šç»“åˆå·²æ”¶é›†ä¿¡æ¯æä¾›ç›¸å…³æ€§æ›´å¼ºçš„æ¨è
- **æ¨èç†ç”±è¯´æ˜**ï¼šAIæä¾›æ¨èé€»è¾‘ï¼Œå¢å¼ºç”¨æˆ·ä¿¡ä»»åº¦
- **æ™ºèƒ½é€‚é…**ï¼šæ ¹æ®ç”¨æˆ·ç±»å‹å’Œç›®æ ‡æ™ºèƒ½è°ƒæ•´æ¨èç­–ç•¥

### ğŸ”§ **çµæ´»è¾“å…¥æ”¯æŒ**
- **AIæ¨èé€‰é¡¹**ï¼šæ™ºèƒ½ç”Ÿæˆçš„ä¸ªæ€§åŒ–é€‰é¡¹
- **è‡ªå®šä¹‰æè¿°**ï¼šæ¯ä¸ªå­—æ®µéƒ½æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å¡«å†™
- **å¤šè¡Œè¾“å…¥**ï¼šhighlight_focus æ”¯æŒå¤šä¸ªäº®ç‚¹è¾“å…¥
- **æ™ºèƒ½å¤„ç†**ï¼šAIè‡ªåŠ¨ä¼˜åŒ–å’Œæ ¼å¼åŒ–ç”¨æˆ·è¾“å…¥

### ğŸš€ **æ™ºèƒ½è·³è½¬æœºåˆ¶**
- **å®Œæˆæ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹ä¿¡æ¯æ”¶é›†å®ŒæˆçŠ¶æ€
- **æ— ç¼è·³è½¬**ï¼šè‡ªåŠ¨è·³è½¬åˆ°é¡µé¢æ„å»ºå™¨
- **çŠ¶æ€ä¼ é€’**ï¼šå®Œæ•´çš„ç”¨æˆ·ç”»åƒä¼ é€’ç»™ä¸‹ä¸€æ¨¡å—

## ğŸ”„ å¤„ç†æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥] --> B[æ„å›¾è¯†åˆ«ä¸“å®¶]
    B --> C{ä¿¡æ¯å®Œæ•´æ€§}
    
    C --> |ä¸å®Œæ•´| D[æ¨èå¼•å¯¼ä¸“å®¶]
    C --> |å®Œæ•´| E[è·³è½¬åˆ°æ„å»ºå™¨]
    
    D --> F[AIç”Ÿæˆä¸ªæ€§åŒ–é€‰é¡¹]
    F --> G[ç”¨æˆ·é€‰æ‹©/è‡ªå®šä¹‰]
    
    G --> |é€‰æ‹©é€‰é¡¹| H[æ›´æ–°ä¿¡æ¯]
    G --> |è‡ªå®šä¹‰è¾“å…¥| I[AIä¼˜åŒ–å¤„ç†]
    
    H --> B
    I --> J[å¤šè¡Œå¤„ç†+æ ¼å¼åŒ–]
    J --> B
    
    E --> K[é¡µé¢æ„å»ºå™¨]
```

## ğŸ“Š æ•°æ®ç»“æ„

### AIæ¨èå“åº”æ ¼å¼
```typescript
interface WelcomeAgentResponse {
  identified: WelcomeCollectedInfo;
  follow_up: {
    missing_fields: string[];
    suggestions: {
      [field: string]: {
        prompt_text: string;      // AIç”Ÿæˆçš„å¼•å¯¼æ–‡æœ¬
        options: string[];        // AIæ¨èçš„é€‰é¡¹
        reasoning: string;        // AIæ¨èç†ç”±
      };
    };
  };
  completion_status: 'collecting' | 'ready';
  direction_suggestions: string[];
}
```

### è¾“å…¥æ•°æ®æ”¯æŒ
```typescript
// 1. é€‰æ‹©AIæ¨èé€‰é¡¹
{ user_role: "å‰ç«¯å¼€å‘è€…" }

// 2. è‡ªå®šä¹‰è¾“å…¥ï¼ˆæ ‡è¯†ï¼‰
{ user_role: "âœï¸ è‡ªå·±æè¿°æˆ‘çš„èº«ä»½" }

// 3. å¤šè¡Œè‡ªå®šä¹‰ï¼ˆhighlight_focusï¼‰
è¾“å…¥ï¼š
"Reactç»„ä»¶åº“staræ•°1000+
å…¨å›½åˆ›æ–°åˆ›ä¸šå¤§èµ›é‡‘å¥–  
CKAè®¤è¯+DevOpså®è·µ"

è¾“å‡ºï¼š
{ highlight_focus: [
  "Reactç»„ä»¶åº“staræ•°1000+",
  "å…¨å›½åˆ›æ–°åˆ›ä¸šå¤§èµ›é‡‘å¥–", 
  "CKAè®¤è¯+DevOpså®è·µ"
]}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŒPromptå¤„ç†ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
```typescript
import { processWelcomeAgent } from './agent';

const result = await processWelcomeAgent(
  "æˆ‘æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘è€…ï¼Œæƒ³è¦å±•ç¤ºæˆ‘çš„ä½œå“",
  {
    user_role: null,
    use_case: null,
    style: null,
    highlight_focus: []
  },
  1, // å¯¹è¯è½®æ¬¡
  {
    provider: 'claude',
    includeDebugInfo: false
  }
);

// AIä¼šè‡ªåŠ¨ï¼š
// 1. è¯†åˆ«ï¼šuser_role="å‰ç«¯å¼€å‘è€…", use_case="ä½œå“å±•ç¤º"
// 2. æ¨èä¸‹ä¸€æ­¥ï¼šä¸ºstyleå­—æ®µç”Ÿæˆä¸ªæ€§åŒ–é€‰é¡¹
```

### WelcomeAgentç±»ä½¿ç”¨
```typescript
import { WelcomeAgent } from './agent';

const agent = new WelcomeAgent();

// å¤„ç†ç”¨æˆ·è¾“å…¥
for await (const response of agent.process(
  { user_input: "æˆ‘æ˜¯è®¾è®¡å¸ˆï¼Œæƒ³åšä¸ªäººä½œå“é›†" },
  sessionData
)) {
  console.log(response);
  // AIè‡ªåŠ¨å¤„ç†å¹¶æ¨èä¸‹ä¸€æ­¥
}
```

### è‡ªå®šä¹‰è¾“å…¥å¤„ç†
```typescript
// å½“ç”¨æˆ·é€‰æ‹©è‡ªå®šä¹‰é€‰é¡¹æ—¶
const customChoice = {
  user_role: "âœï¸ è‡ªå·±æè¿°æˆ‘çš„èº«ä»½"
};

// ç³»ç»Ÿè‡ªåŠ¨å¼•å¯¼ï¼š
// "è¯·è¯¦ç»†æè¿°æ‚¨çš„èº«ä»½èƒŒæ™¯ï¼š
//  â€¢ æ‚¨çš„èŒä¸šæˆ–ä¸“ä¸šé¢†åŸŸ
//  â€¢ æ‚¨çš„å·¥ä½œç»éªŒæˆ–å­¦ä¹ èƒŒæ™¯
//  â€¢ æ‚¨çš„ä¸“ä¸šæŠ€èƒ½æˆ–ç‰¹é•¿..."
```

## ğŸ”§ æŠ€æœ¯æ¶æ„è¯¦è§£

### ğŸ¯ **çº¯å¤§æ¨¡å‹æ¶æ„**
```typescript
// ç§»é™¤äº†æ‰€æœ‰æœ¬åœ°ç®—æ³•ï¼Œçº¯AIé©±åŠ¨
async function processWelcomeAgent(userInput, collectedInfo) {
  // æ­¥éª¤1ï¼šAIæ„å›¾è¯†åˆ«
  const intentResult = await recognizeUserIntent(userInput, collectedInfo);
  
  // æ­¥éª¤2ï¼šAIæ¨èå¼•å¯¼ï¼ˆä»…åœ¨éœ€è¦æ—¶ï¼‰
  if (intentResult.completion_status === 'collecting') {
    const guideResult = await generateRecommendationGuide(intentResult);
    return mergeResults(intentResult, guideResult);
  }
  
  return intentResult;
}
```

### ğŸ”„ **çŠ¶æ€ç®¡ç†**
```typescript
interface SessionMetadata {
  waitingForCustomDescription?: string;  // ç­‰å¾…è‡ªå®šä¹‰æè¿°
  intentData?: WelcomeCollectedInfo;     // æ”¶é›†çš„ä¿¡æ¯
  conversationRound?: number;            // å¯¹è¯è½®æ¬¡
  completionStatus?: 'collecting' | 'ready';
}
```

### ğŸš€ **è·³è½¬æœºåˆ¶**
```typescript
// ä¿¡æ¯æ”¶é›†å®Œæˆæ—¶è‡ªåŠ¨è¿”å›
{
  intent: 'advance_to_next',
  action: 'redirect_to_builder',
  collected_info: {
    user_role: "å‰ç«¯å¼€å‘è€…",
    use_case: "ä½œå“å±•ç¤º", 
    style: "ç°ä»£ç®€çº¦",
    highlight_focus: ["ReactæŠ€èƒ½", "å¼€æºé¡¹ç›®"]
  },
  next_step: 'page_builder'
}
```

## ğŸ æ ¸å¿ƒä¼˜åŠ¿

### 1. **çº¯AIé©±åŠ¨**
- ğŸ¤– **æ™ºèƒ½æ¨è**ï¼šæ‰€æœ‰é€‰é¡¹éƒ½ç”±AIåŸºäºç”¨æˆ·ç”»åƒåŠ¨æ€ç”Ÿæˆ
- ğŸ¯ **ä¸ªæ€§åŒ–**ï¼šæ¯ä¸ªæ¨èéƒ½æœ‰AIåˆ†æçš„ç†ç”±å’Œä¸Šä¸‹æ–‡
- ğŸ”„ **è‡ªé€‚åº”**ï¼šAIæ ¹æ®å¯¹è¯è¿›å±•è°ƒæ•´æ¨èç­–ç•¥
- ğŸ“Š **ç²¾å‡†åº¦é«˜**ï¼šå¤§æ¨¡å‹ç†è§£èƒ½åŠ›å¼ºï¼Œæ¨èæ›´å‡†ç¡®

### 2. **æ¶æ„ç®€æ´**
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–**ï¼šç§»é™¤å¤æ‚çš„æœ¬åœ°ç®—æ³•ï¼Œå“åº”æ›´å¿«
- ğŸ”§ **æ˜“ç»´æŠ¤**ï¼šä»£ç é‡å‡å°‘50%+ï¼Œé€»è¾‘æ›´æ¸…æ™°
- ğŸ›¡ï¸ **ç¨³å®šæ€§å¼º**ï¼šé™çº§å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š
- ğŸ“ **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰

### 3. **ç”¨æˆ·ä½“éªŒä¼˜ç§€**
- ğŸ’¬ **å¯¹è¯è‡ªç„¶**ï¼šAIç”Ÿæˆçš„å¼•å¯¼æ›´äººæ€§åŒ–
- âš¡ **å“åº”è¿…é€Ÿ**ï¼šå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ï¼Œæå‡é€Ÿåº¦
- ğŸ¨ **æ¨èç²¾å‡†**ï¼šåŸºäºçœŸå®ç†è§£çš„æ™ºèƒ½æ¨è
- ğŸ”„ **æµç¨‹é¡ºç•…**ï¼šæ™ºèƒ½è·³è½¬ï¼Œæ— ç¼ä½“éªŒ

### 4. **å¼€å‘ä½“éªŒå‹å¥½**
- ğŸ“‹ **å‘åå…¼å®¹**ï¼šä¿æŒåŸæœ‰æ¥å£ï¼Œå¹³æ»‘å‡çº§
- ğŸ” **è°ƒè¯•ç®€å•**ï¼šæ¸…æ™°çš„AIè°ƒç”¨é“¾è·¯å’Œæ—¥å¿—
- ğŸ“š **æ–‡æ¡£æ¸…æ™°**ï¼šç®€åŒ–çš„APIå’Œä½¿ç”¨è¯´æ˜
- ğŸ§ª **æ˜“äºæµ‹è¯•**ï¼šä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œæµ‹è¯•æ›´ç®€å•

---

è¿™å¥—**çº¯å¤§æ¨¡å‹é©±åŠ¨**çš„ç®€åŒ–æ¶æ„ï¼Œä¸“æ³¨äºå‘æŒ¥AIçš„æ™ºèƒ½ä¼˜åŠ¿ï¼Œæä¾›æ›´åŠ ç²¾å‡†ã€ä¸ªæ€§åŒ–ã€é«˜æ•ˆçš„ç”¨æˆ·ä¿¡æ¯æ”¶é›†ä½“éªŒã€‚ğŸ‰ 